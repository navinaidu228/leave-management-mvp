(()=>{let e;function o(e,o,t,r){Object.defineProperty(e,o,{get:t,set:r,enumerable:!0,configurable:!0})}var t,r,i,a,n,d,l,_,s={};o(s,"FloorsApiStatus",()=>d),o(s,"ErrorCode",()=>l),o(s,"errorDict",()=>J),o(s,"tryCatch",()=>Z),o(s,"deepCopy",()=>er),o(s,"generateUUID",()=>es),o(s,"getDecayRateFromModelVersion",()=>eR),o(s,"getFloorRuleValue",()=>eT),o(s,"triggerPmac",()=>eP),o(s,"initPubxGlobalsCustomAzerion",()=>eG),o(s,"arePubxFloorsSkipped",()=>eB),o(s,"getAdUnitBidModelVersion",()=>ej),o(s,"arePubxFloorsSet",()=>eK),o(s,"getHeuristicValue",()=>ek),o(s,"getFloorsMvKeyVals",()=>eH),o(s,"getSplitKeyVals",()=>eX);var u={};o(u,"FLOOR_PROVIDER",()=>c),o(u,"DEC_LIMIT",()=>p),o(u,"FLOORS_EVENT_HANDLE",()=>O),o(u,"AdUnitStatus",()=>n),o(u,"getPbConfigObject",()=>g),o(u,"initPbNamespace",()=>f),o(u,"getDefaultFloorRulesData",()=>b),o(u,"getFloorsConfig",()=>N),o(u,"setFloorsConfig",()=>m),o(u,"convertCurrency",()=>y),o(u,"getFloorModelVersionForLogs",()=>T),o(u,"getFloorModelVersion",()=>x),o(u,"getMvmVersion",()=>D),o(u,"adUnitFilter",()=>L),o(u,"readFloorsFromPbjs",()=>P);let c="PubxFloorProvider",p=4,O="floorsApi";(t=n||(n={})).WIN="WIN",t.FLOORED="FLOORED",t.NOBIDS="NOBIDS";let g=()=>(()=>({splitRate:100,samplingRate:1,pbNsKeys:"pgPrebid",pbNamespace:null,currency:"USD",modelVersion:"cb_AB_z_dt_0.75_dwt_1.0_dnt_0.1",auctionDelay:100,pubxId:"251fdff9-3043-42e6-a6f4-35500425a8a6",schema:['gptSlot','mediaType'],defaultValues:{'*|banner':0.0507,'div-gpt-ad-Programizcom36786|banner':0.0503,'div-gpt-ad-Programizcom36791|banner':0.056,'div-gpt-ad-Programizcom36792|banner':0.0538,'div-gpt-ad-Programizcom38583|banner':0.0496,'div-gpt-ad-Programizcom36787-aschild-1|banner':0.052,'div-gpt-ad-Programizcom36787-aschild-2|banner':0.0518},floorFetchUrl:"https://floor.pbxai.com/?pubxId=251fdff9-3043-42e6-a6f4-35500425a8a6&page="+window.location.href,floorMin:null,floorEnforcement:{"floorDeals":true},hbPbKey:"hb_pb",pubxSplitKey:"pubx-a",pubxSplitOnValue:"on",pubxSplitOffValue:"off",pubxOptimizedKey:"pubx-op",pubxOptimizedOnValue:"on",pubxOptimizedOffValue:"off",pubxMvKey:"pubx-m_v",pubxFloorKey:"pubx-floor",pubxFloorMvKey:"pubx-floor-mv",pubxHeuristicKey:"pubx-segment"}))(),f=(e,o)=>{window[o]=window[o]||{},window[o].que=window[o].que||[],window[o].name=o,e.pbNamespace=window[o]},b=e=>({floorProvider:c,modelVersion:e.modelVersion,currency:e.currency,schema:{fields:e.schema},values:e.defaultValues}),N=e=>{let o={floors:{auctionDelay:e.auctionDelay,endpoint:{url:e.floorFetchUrl},data:b(e)}};return e.floorMin&&(o.floors.floorMin=e.floorMin),e.floorEnforcement&&(o.floors.enforcement=e.floorEnforcement),o},m=(e,o)=>{window.__pubxLoaded__&&e.pbNamespace.que.push(function(){let{debug:t,error:r,remotePageError:i}=window.__pubx__.logger;if(!e.pbNamespace.installedModules.includes("priceFloors")){i({code:s.ErrorCode.PRICE_FLOORS_NOT_FOUND});return}let a=e.pbNamespace.getConfig("floors");a&&a.data&&a.data.floorProvider&&a.data.floorProvider!==c&&i({code:s.ErrorCode.NON_PUBX_FLOORS_FOUND,payload:{existingFloors:a}});let n=o(e);window.__pubxFloorsConfig__=n,e.pbNamespace.setConfig(n),t("Setting Floors Config",(0,s.deepCopy)(n))})},R=(e,o)=>{let t=void 0!==e.adserverTargeting&&void 0!==e.adserverTargeting[o]&&!isNaN(e.adserverTargeting[o])&&parseFloat(e.adserverTargeting[o])>0;return t},E=(e,o)=>e.filter(e=>e.adUnitCode===o),U=(e,o)=>e.filter(e=>e.adUnitCode===o),F=(e,o)=>e.flatMap(e=>e.bids).filter(e=>e.adUnitCode===o),C=(e,o,t)=>0===e.length&&0===o.length?n.NOBIDS:e.some(e=>R(e,t))?n.WIN:n.FLOORED,y=(e,o,t,r,i,a)=>void 0===e||"string"!=typeof o||"string"!=typeof t?(a({code:s.ErrorCode.CURRENCY_INVALID_INPUT,adUnitCode:i,payload:{value:e,fromCurrency:o,toCurrency:t}}),Number(e)):o===t?Number(e):void 0===r.pbNamespace.convertCurrency?(a({code:s.ErrorCode.CURRENCY_MODULE_NOT_INSTALLED,adUnitCode:i,payload:{value:e,fromCurrency:o,toCurrency:t}}),Number(e)):r.pbNamespace.convertCurrency(e,o,t),w=(e,o)=>[...e,...o],A=e=>{if(void 0!==e)return{floorValue:e.floorValue,floorRule:e.floorRule,floorCurrency:e.floorCurrency}},v=(e,o,t,r,i,a,d)=>{let l,_,u,c;let{remoteAucError:O,remoteAucEvent:g}=d,{hbPbKey:f}=a,{isRtd:b}=window.__pubx__;switch(i){case n.WIN:let N=o.filter(e=>R(e,f)).sort((e,o)=>parseFloat(o.adserverTargeting[f])-parseFloat(e.adserverTargeting[f]))[0];l=parseFloat(N.adserverTargeting[f]),_=N.currency,u=N.floorData,c=N.adserverTargeting;break;case n.FLOORED:let m=w(t,o),E=m.sort((o,t)=>y(t.originalCpm,t.originalCurrency,a.currency,a,e.code,O)-y(o.originalCpm,o.originalCurrency,a.currency,a,e.code,O))[0];l=E.originalCpm,_=E.originalCurrency,u=E.floorData,c=E.adserverTargeting;break;case n.NOBIDS:if(_=window.__pubxFloorsConfig__?window.__pubxFloorsConfig__.floors.data.currency:a.currency,(0,s.arePubxFloorsSkipped)(e)){l=.01;break}if(b){let o=K(e.code);if(o){let e=(0,s.getFloorRuleValue)(o,window.__nextfloorsConfig__)||(0,s.getFloorRuleValue)(o,window.__pubxFloorsConfig__);if(e){l=e;break}}O({code:s.ErrorCode.NO_BID_FLOOR_RULE_NOT_FOUND,adUnitCode:e.code})}else{let o=r.flatMap(e=>{if("function"==typeof e.getFloor){let o=e.getFloor({size:"*",mediaType:"banner"});if(void 0!==o&&void 0!==o.floor)return o.floor}}).filter(e=>void 0!==e);if(0!==o.length){l=o.reduce((e,o)=>e+o,0)/o.length;break}O({code:s.ErrorCode.GET_FLOOR_NOT_FOUND,adUnitCode:e.code})}void 0!==a.defaultValues["*|banner"]?l=a.defaultValues["*|banner"]:(O({code:s.ErrorCode.TAG_DEFAULT_VALUES_NOT_FOUND,adUnitCode:e.code}),l=.01)}return g({type:"pbBid",data:{adUnitCode:e.code,status:i,bidCurrency:_,bidValue:parseFloat(l.toFixed(p)),pubCurrency:a.currency,floorData:A(u),adserverTargeting:c}}),i===n.FLOORED&&(l=y(l,_,a.currency,a,e.code,O)),parseFloat(l.toFixed(p))},T=e=>e.adUnits.flatMap(e=>e.bids).map(s.getAdUnitBidModelVersion).filter(e=>void 0!==e)[0],x=(e,o)=>{let t=e.bids.map(s.getAdUnitBidModelVersion).filter(e=>void 0!==e)[0];if(void 0===t)throw o.remoteAucError({code:s.ErrorCode.MODEL_VERSION_NOT_FOUND_READ,adUnitCode:e.code}),Error(s.errorDict[s.ErrorCode.MODEL_VERSION_NOT_FOUND_READ].message+" for adUnit "+e.code);return t},D=e=>{let o=e.includes("_AB_")?e.split("_AB_")[1].split("_")[0]:void 0;return o},I=(e,o,t)=>{switch(t){case n.WIN:return e.includes("_dwt_")?parseFloat(e.split("_dwt_")[1].split("_")[0]):o.winBidMultiplier;case n.FLOORED:return e.includes("_dt_")?parseFloat(e.split("_dt_")[1].split("_")[0]):o.flooredBidMultiplier;case n.NOBIDS:return e.includes("_dnt_")?parseFloat(e.split("_dnt_")[1].split("_")[0]):o.noBidMultiplier}},S=(e,o,t)=>{if(e.includes("_fm_"))return parseFloat(e.split("_fm_")[1].split("_")[0]);if(!o.pmacFloorMultiplier)throw t({code:s.ErrorCode.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG}),Error(s.errorDict[s.ErrorCode.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG].message);return o.pmacFloorMultiplier},L=(e,o,t)=>{let r=void 0!==e.mediaTypes.banner,i=e.bids.some(e=>!!e.bidder),a=(0,s.arePubxFloorsSet)(e);if(!o&&a)throw t({code:s.ErrorCode.PUBX_OFF_FLOORS_FOUND,adUnitCode:e.code}),Error(s.errorDict[s.ErrorCode.PUBX_OFF_FLOORS_FOUND].message+" for adUnitCode "+e.code);return r&&i&&(!o&&!a||o&&a)},h=e=>e?e.filter(e=>!!e.originalCpm):[],P=(e,o,t,r,i)=>{let{remoteAucError:a}=i,n=E(o.bidsReceived,e.code),d=U(h(o.bidsRejected),e.code),l=F(o.bidderRequests,e.code),_=C(n,d,r.hbPbKey),u=v(e,n,d,l,_,r,i);(0,s.tryCatch)({remoteError:a,code:s.ErrorCode.UNCAUGHT_ERROR,location:"triggerPmac"},()=>{(0,s.triggerPmac)(o.auctionId,e.code,u,_,r,S(t,r,a),(0,s.getDecayRateFromModelVersion)(t,r),i)}),e.code;let c=parseFloat((u*I(t,r,_)).toFixed(p));return(0,s.arePubxFloorsSkipped)(e)?void 0:{adUnitCode:e.code,floorValue:c,status:_}},M=()=>(()=>({flooredBidMultiplier:0.75,noBidMultiplier:0.1,winBidMultiplier:1.0,pmacFloorMultiplier:0.5,decayRate:null,gamBuckets:[{'pbx_a0d_n':[0,0.03]},{'pbx_a1d_n':[0.03,0.06]},{'pbx_a2d_n':[0.06,0.09]},{'pbx_a3d_n':[0.09,0.12]},{'pbx_a4d_n':[0.12,0.15]},{'pbx_b0d_n':[0.15,0.2]},{'pbx_b1d_n':[0.2,0.25]},{'pbx_b2d_n':[0.25,0.3]},{'pbx_b3d_n':[0.3,0.35]},{'pbx_b4d_n':[0.35,0.4]},{'pbx_b5d_n':[0.4,0.45]},{'pbx_b6d_n':[0.45,0.5]},{'pbx_b7d_n':[0.5,0.55]},{'pbx_b8d_n':[0.55,0.6]},{'pbx_b9d_n':[0.6,0.65]},{'pbx_b10d_n':[0.65,0.7]},{'pbx_b11d_n':[0.7,0.75]},{'pbx_b12d_n':[0.75,0.8]},{'pbx_b13d_n':[0.8,0.85]},{'pbx_b14d_n':[0.85,0.9]},{'pbx_b15d_n':[0.9,0.95]},{'pbx_b16d_n':[0.95,1]},{'pbx_c0d_n':[1,1.1]},{'pbx_c1d_n':[1.1,1.2]},{'pbx_c2d_n':[1.2,1.3]},{'pbx_c3d_n':[1.3,1.4]},{'pbx_c4d_n':[1.4,1.5]},{'pbx_c5d_n':[1.5,1.6]},{'pbx_c6d_n':[1.6,1.7]},{'pbx_c7d_n':[1.7,1.8]},{'pbx_c8d_n':[1.8,1.9]},{'pbx_c9d_n':[1.9,2]},{'pbx_d0d_n':[2,2.25]},{'pbx_d1d_n':[2.25,2.5]},{'pbx_d2d_n':[2.5,2.75]},{'pbx_d3d_n':[2.75,3]},{'pbx_d4d_n':[3,3.25]},{'pbx_d5d_n':[3.25,3.5]},{'pbx_d6d_n':[3.5,3.75]},{'pbx_d7d_n':[3.75,4]},{'pbx_d8d_n':[4,4.25]},{'pbx_d9d_n':[4.25,4.5]},{'pbx_d10d_n':[4.5,4.75]},{'pbx_d11d_n':[4.75,5]},{'pbx_d12d_n':[5,111111]}]}))(),V=()=>{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},G=e=>{let o=(0,u.getPbConfigObject)();(0,u.initPbNamespace)(o,e);let t=M();return V(),Object.assign(Object.assign({},o),t)},B=(e,o)=>{let{error:t}=window.__pubx__.logger,r=googletag.pubads().getSlots(),i=[];return e.forEach(e=>{let o=r.find(o=>o.getAdUnitPath()===e||o.getSlotElementId()===e);void 0!==o&&i.push({adUnitCode:e,slot:o})}),i},j=(e,o,t,r,i,a,n="")=>{let{remoteAucEvent:d}=a;i.setTargeting(t,r),window.__pubx__.logger.debug("Setting KVs in GAM",n,{auctionId:e,adUnitCode:o,key:t,value:r,gptSlot:i}),d({type:"gamTargeting",data:{adUnitCode:o,[t]:r}})},K=e=>{let o=googletag.pubads().getSlots().find(o=>o.getAdUnitPath()===e||o.getSlotElementId()===e);return o},k=(e,o,t)=>{let r=K(o);if(r){let i=r.getTargetingKeys().filter(e=>[t.pubxSplitKey,t.pubxOptimizedKey,t.pubxMvKey,t.pubxFloorKey,t.pubxFloorMvKey,t.pubxHeuristicKey].includes(e));i.forEach(e=>{r.clearTargeting(e)}),window.__pubx__.logger.debug("Clearing KVs in GAM",{auctionId:e,adUnitCode:o,keys:i})}},H=(e,o,t,r,i)=>{let{remoteAucError:a}=i;googletag.cmd.push(()=>{(0,s.tryCatch)({remoteError:a,code:s.ErrorCode.UNCAUGHT_GAM_ERROR,location:"setKeyGam"},()=>{let a=e.code;k(o,a,r);let{remoteAucError:n}=i,{__pubxGamQue__:d}=window,l=K(a);l?(Object.assign(t,(0,s.getHeuristicValue)(e,l,r,t)),Object.entries(t).forEach(([e,t])=>{j(o,a,e,t,l,i)})):d.push({id:(0,s.generateUUID)(),auctionId:o,adUnitCode:a,cmd:()=>{let d=K(a);return d?(Object.assign(t,(0,s.getHeuristicValue)(e,d,r,t)),Object.entries(t).forEach(([e,t])=>{j(o,a,e,t,d,i,"from QUE")}),!0):(n({code:s.ErrorCode.GAM_QUE_GPT_SLOT_NOT_FOUND,adUnitCode:a}),!1)},error:()=>{n({code:s.ErrorCode.GPT_SLOT_NOT_FOUND,adUnitCode:a})},logged:!1})})})},W=(e,o,t)=>{e.pbNamespace.que.push(()=>{e.pbNamespace.onEvent("auctionEnd",r=>{try{r=Object.assign({},r);let{makeRemoteAucError:i,makeRemoteAucEvent:a,error:n}=window.__pubx__.logger,d=i(r),l=a(r),_={remoteAucError:d,remoteAucEvent:l};(0,s.tryCatch)({remoteError:d,code:s.ErrorCode.UNCAUGHT_ERROR,location:"readAndSetKvsAuction"},()=>{let i=window.__pubxLoaded__;t&&(r=t(r,e,_)),r.adUnits.filter(e=>(0,u.adUnitFilter)(e,i,_.remoteAucError)).map(t=>{(0,s.tryCatch)({remoteError:d,code:s.ErrorCode.UNCAUGHT_ERROR,location:"readAndSetKvsAdUnit"},()=>{let i=(0,s.getSplitKeyVals)(t,e);if((0,s.arePubxFloorsSet)(t)){let o=(0,u.getFloorModelVersion)(t,_),a=(0,u.readFloorsFromPbjs)(t,r,o,e,_);a&&Object.assign(i,(0,s.getFloorsMvKeyVals)(a,o,e,_.remoteAucError))}o(t,r.auctionId,i,e,_)})})})}catch(e){window.__pubx__.logger.error(e)}})})},z=(e,o)=>{if(0===e)return o[0];let t=o.find(o=>{let t=Object.keys(o)[0],[r,i]=o[t];return e>r&&e<=i});return t},q=(e,o,t)=>{let r=z(e.floorValue,o.gamBuckets);if(void 0===r)throw t({code:s.ErrorCode.GAM_BUCKET_NOT_FOUND,adUnitCode:e.adUnitCode,payload:{floorWithStatus:e}}),Error(s.errorDict[s.ErrorCode.GAM_BUCKET_NOT_FOUND].message+" for "+JSON.stringify(e));let i=Object.keys(r)[0],a=e.status===u.AdUnitStatus.WIN?"_w":e.status===u.AdUnitStatus.FLOORED?"_f":"_n";return i.split("_n")[0]+a},X=e=>{e.pbNamespace.que.push(function(){let{error:e,remotePageError:o}=window.__pubx__.logger;googletag.cmd.push(()=>{googletag.pubads().addEventListener("slotAdded",e=>{(0,s.tryCatch)({remoteError:o,code:s.ErrorCode.UNCAUGHT_GAM_ERROR,location:"setupEventHandlersForGamQue"},()=>{let o=e.slot,{__pubxGamQue__:t}=window,r=t.filter(e=>o&&(o.getAdUnitPath()===e.adUnitCode||o.getSlotElementId()===e.adUnitCode));r.forEach(e=>{if(e.cmd()){let o=t.findIndex(o=>o.id===e.id);o>-1&&t.splice(o,1)}})})})})})};var Q=function(e,o,t,r){return new(t||(t=Promise))(function(i,a){function n(e){try{l(r.next(e))}catch(e){a(e)}}function d(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var o;e.done?i(e.value):((o=e.value)instanceof t?o:new t(function(e){e(o)})).then(n,d)}l((r=r.apply(e,o||[])).next())})},Y=function(e,o){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>o.indexOf(r)&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>o.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};(r=d||(d={})).IN_PROGRESS="IN_PROGRESS",r.SUCCESS="SUCCESS",r.ERROR="ERROR",(i=l||(l={})).GPT_SLOT_NOT_FOUND="GPT_SLOT_NOT_FOUND",i.GAM_QUE_GPT_SLOT_NOT_FOUND="GAM_QUE_GPT_SLOT_NOT_FOUND",i.GAM_BUCKET_NOT_FOUND="GAM_BUCKET_NOT_FOUND",i.CALC_FLOOR_NOT_FOUND="CALC_FLOOR_NOT_FOUND",i.IMPROVEMEDIA_API_NOT_FOUND="IMPROVEMEDIA_API_NOT_FOUND",i.INVESTING_FILTER_NOT_FOUND="INVESTING_FILTER_NOT_FOUND",i.PUBX_AA_NOT_FOUND="PUBX_AA_NOT_FOUND",i.PRICE_FLOORS_NOT_FOUND="PRICE_FLOORS_NOT_FOUND",i.NON_PUBX_FLOORS_FOUND="NON_PUBX_FLOORS_FOUND",i.CURRENCY_INVALID_INPUT="CURRENCY_INVALID_INPUT",i.CURRENCY_MODULE_NOT_INSTALLED="CURRENCY_MODULE_NOT_INSTALLED",i.GET_FLOOR_NOT_FOUND="GET_FLOOR_NOT_FOUND",i.NO_BID_FLOOR_RULE_NOT_FOUND="NO_BID_FLOOR_RULE_NOT_FOUND",i.TAG_DEFAULT_VALUES_NOT_FOUND="TAG_DEFAULT_VALUES_NOT_FOUND",i.PUBX_OFF_FLOORS_FOUND="PUBX_OFF_FLOORS_FOUND",i.MODEL_VERSION_NOT_FOUND_READ="MODEL_VERSION_NOT_FOUND_READ",i.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG="PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG",i.INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE="INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE",i.MISSING_ADUNIT_FLOOR_RESPONSE="MISSING_ADUNIT_FLOOR_RESPONSE",i.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE="PMAC_FLOOR_RESPONSE_NOT_AVAILABLE",i.UNCAUGHT_ERROR="UNCAUGHT_ERROR",i.UNCAUGHT_GAM_ERROR="UNCAUGHT_GAM_ERROR",(a=_||(_={})).INFO="INFO",a.WARNING="WARNING",a.ERROR="ERROR",a.FATAL="FATAL";let J={[l.GPT_SLOT_NOT_FOUND]:{message:"GPT Slot not found",severity:_.WARNING},[l.GAM_QUE_GPT_SLOT_NOT_FOUND]:{message:"Gam Que: GPT Slot not found",severity:_.ERROR},[l.GAM_BUCKET_NOT_FOUND]:{message:"GAM Bucket not found",severity:_.WARNING},[l.CALC_FLOOR_NOT_FOUND]:{message:"floorWithStatus not found",severity:_.FATAL},[l.IMPROVEMEDIA_API_NOT_FOUND]:{message:"lwhbim.adServerKeywordsAdUnit is not defined",severity:_.ERROR},[l.INVESTING_FILTER_NOT_FOUND]:{message:"window._imhb_auctions is not defined",severity:_.ERROR},[l.PUBX_AA_NOT_FOUND]:{message:"pubxaiAnalyticsAdapter module is not installed",severity:_.WARNING},[l.PRICE_FLOORS_NOT_FOUND]:{message:"priceFloors module is not installed",severity:_.WARNING},[l.NON_PUBX_FLOORS_FOUND]:{message:"Non-pubx floor provider present",severity:_.WARNING},[l.CURRENCY_INVALID_INPUT]:{message:"Invalid input types for currency conversion",severity:_.WARNING},[l.CURRENCY_MODULE_NOT_INSTALLED]:{message:"currency module of prebid.js is not installed",severity:_.WARNING},[l.GET_FLOOR_NOT_FOUND]:{message:"calc nbids - None of bidderRequests.bids.getFloor() is defined",severity:_.WARNING},[l.NO_BID_FLOOR_RULE_NOT_FOUND]:{message:"calc nbids - Floor rule not found in __pubxFloorsConfig__ and __nextfloorsConfig__",severity:_.WARNING},[l.TAG_DEFAULT_VALUES_NOT_FOUND]:{message:"defaultValues of *|banner in config is undefined",severity:_.ERROR},[l.PUBX_OFF_FLOORS_FOUND]:{message:"pubxLoaded is false but has floorData",severity:_.FATAL},[l.MODEL_VERSION_NOT_FOUND_READ]:{message:"floorModelVersion is undefined but adUnit.bids is not",severity:_.FATAL},[l.PMAC_FLOOR_MULTIPLIER_NOT_FOUND_CONFIG]:{message:"PMAC floor multiplier not found in config",severity:_.ERROR},[l.INVALID_SCHEMA_FIELDS_FLOORS_RESPONSE]:{message:"Invalid schema fields in floor rules response, expected only ['gptSlot']",severity:_.ERROR},[l.MISSING_ADUNIT_FLOOR_RESPONSE]:{message:"adUnitCode not found in floor rules response",severity:_.ERROR},[l.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE]:{message:"Floors Reponse not available for pmac",severity:_.WARNING},[l.UNCAUGHT_ERROR]:{message:"Uncaught Error",severity:_.ERROR},[l.UNCAUGHT_GAM_ERROR]:{message:"Uncaught GAM Error",severity:_.ERROR}},Z=({remoteError:e,code:o,location:t},r)=>{try{r()}catch(r){window.__pubx__.logger.error(r),e({code:o,payload:{name:r.name,message:r.message,location:t}})}},$=e=>{let{__pubx__:{variant:o,version:t}}=window;return{variant:o,version:t,loadTime:window.__loadTime__,pbVersion:e.pbNamespace.version,pbNamespace:e.pbNamespace.name}},ee=e=>({userAgent:navigator.userAgent,host:window.location.host,path:window.location.pathname,pageId:e,doNotTrack:navigator.doNotTrack}),eo=(e,o)=>e.pbNamespace.getEvents().filter(e=>"auctionEnd"===e.eventType).findIndex(e=>e.args.auctionId===o),et=e=>e.pbNamespace.getEvents().filter(e=>"auctionInit"===e.eventType).length,er=e=>JSON.parse(JSON.stringify(e)),ei=e=>{let{code:o,adUnitCode:t,payload:r}=e,{message:i,severity:a}=J[o];return{code:o,severity:a,message:i,adUnitCode:t,payload:r}},ea=(e,o,t,r)=>{let i=er(o);if(e.adUnitCode){let{adUnits:o,bidderRequests:t,bidsReceived:r,bidsRejected:a}=i;i=Object.assign(Object.assign({},i),{adUnits:o.filter(o=>o.code===e.adUnitCode),bidderRequests:t.map(o=>Object.assign(Object.assign({},o),{bids:o.bids.filter(o=>o.adUnitCode===e.adUnitCode)})),bidsReceived:r.filter(o=>o.adUnitCode===e.adUnitCode),bidsRejected:a?a.filter(o=>o.adUnitCode===e.adUnitCode):void 0})}let{auctionId:a,adUnits:n,bidderRequests:d,bidsReceived:l,bidsRejected:_}=i,s={adUnits:n.map(({code:e,sizes:o,bids:t,mediaTypes:r})=>({code:e,mediaTypes:Object.keys(r)})),bidderRequestsCount:d.length,bidsReceived:l.map(({adUnitCode:e,adserverTargeting:o,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n})=>({adUnitCode:e,adserverTargeting:o?{hb_pb:o.hb_pb}:void 0,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n?{floorValue:n.floorValue}:void 0})),bidsRejected:_?_.map(({adUnitCode:e,adserverTargeting:o,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n})=>({adUnitCode:e,adserverTargeting:o?{hb_pb:o.hb_pb}:void 0,cpm:t,currency:r,originalCpm:i,originalCurrency:a,floorData:n?{floorValue:n.floorValue}:void 0})):void 0};return Object.assign({previousAuctionCount:eo(t,a),auctionId:a,auctionInfo:s,modelVersion:(0,u.getFloorModelVersionForLogs)(o)},en(e,t,r))},en=(e,o,t)=>({type:"error",isPubxEnabled:window.__pubxLoaded__,pubxId:o.pubxId,tagInfo:$(o),pageInfo:ee(t),errorData:ei(e),timesince:Date.now()-window.__loadTimestamp__,timestamp:Date.now()}),ed=e=>{let o=e.pbNamespace.getConfig("floors");return o&&o.data&&o.data.floorProvider?o.data.floorProvider:void 0},el=(e,o,t,r)=>{let{auctionId:i,adUnits:a,bidsReceived:n,bidsRejected:d,bidderRequests:l}=e,_={adUnitCount:a.length,bidCount:n.length+(d?d.length:0),bidders:[...new Set(l.map(({bidderCode:e})=>e))]};return{type:"event",isPubxEnabled:window.__pubxLoaded__,pubxId:o.pubxId,loadedBeforePb:window.__loadedBeforePb__,tagInfo:$(o),floorProvider:ed(o),pageInfo:ee(r),missedAuctionCount:t,timesince:Date.now()-window.__loadTimestamp__,timestamp:Date.now(),previousAuctionCount:eo(o,i),auctionId:i,auctionInfo:_,modelVersion:(0,u.getFloorModelVersionForLogs)(e),pbBidData:[],gamTargetingData:[]}},e_=e=>{let{severity:o}=J[e.code];return!1},es=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let o=16*Math.random()|0;return("x"===e?o:3&o|8).toString(16)}),eu=()=>{window.__pubxGamQue__.filter(e=>!e.logged).forEach(e=>{e.error(),e.logged=!0})},ec=e=>{let o=[],t=[],r=[],i=et(e),a=es(),n=1/e.samplingRate>Math.random();window.__pubxLogsEnabled__=n;let d=e=>JSON.stringify(e).length,l=(e,o)=>{let t=[],r=0,i=[];for(let a of e){let e=d([a]);r+e>o?(i.push(t),t=[a],r=e):(t.push(a),r+=e)}return t.length>0&&i.push(t),i},_=(e,o)=>{0!==e.length&&l(e,65536).map(e=>{JSON.parse(JSON.stringify(e));let t=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon(o,t)})},s=()=>!!navigator.sendBeacon&&!!document.visibilityState;s()&&document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(eu(),_([...o,...t,...r],"https://analytics.pbxai.com/logs"),[o,t,r].map(e=>e.splice(0)))});let u=window.location.search,c=new URLSearchParams(u),p=(...e)=>{e=e.filter(e=>void 0!==e),c.has("pubx_debug")&&console.error("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","ERROR:",...e)};return{debug:(e,...o)=>{c.has("pubx_debug")&&console.info("%cPubx.ai","background-color: #fc6203; color: white; border-radius: 3px; padding: 1px 4px","INFO:",e,...o)},error:p,makeRemoteAucError:t=>{let r=er(t);return t=>{let{code:i,adUnitCode:d,payload:l}=t;p(J[i].message,d,l),s()&&(n||e_(t))&&o.push(ea(t,r,e,a))}},remotePageError:o=>{let{code:r,adUnitCode:i,payload:d}=o;p(J[r].message,i,d),s()&&(n||e_(o))&&t.push(en(o,e,a))},makeRemoteAucEvent:o=>{let t=er(o),d=(o,r)=>{let n=r.find(e=>e.auctionId===t.auctionId);if(void 0===n&&(n=el(t,e,i,a),r.push(n)),"pbBid"===o.type)n.pbBidData.push(o.data);else if("gamTargeting"===o.type){let e=o.data,t=n.gamTargetingData.find(o=>o.adUnitCode===e.adUnitCode);void 0===t?n.gamTargetingData.push(e):Object.assign(t,e)}er(r)};return e=>{s()&&n&&d(e,r)}}}},ep=e=>{window.__pubx__.logger.debug("version:",window.__pubx__.variant+"_"+window.__pubx__.version+"_"+e.name)},eO=()=>{window.__loadTime__=window.__loadTimestamp__?Date.now()-window.__loadTimestamp__:-1,window.__loadTimestamp__=Date.now()},eg=(e,o)=>{let t=window.__pubxFloorsConfig__.floors,{auctionDelay:r,endpoint:i,data:a}=t,n=Y(t,["auctionDelay","endpoint","data"]);window.__nextfloorsConfig__={floors:Object.assign(Object.assign({},n),{data:e})}},ef=e=>window.__pmacCpmHistory__[e],eb=e=>{let o=ef(e);return o?o.history:[]},eN=(e,o,t,r)=>{let{debug:i}=window.__pubx__.logger,{__pmacCpmHistory__:a}=window;void 0===a[o]&&(a[o]={history:[],decayRate:void 0});let n={auctionId:e,cpm:t,adUnitStatus:r};eb(o).push(n),i("Update Pmac history",o,n)},em=(e,o,t)=>Math.log(o/(e=0===e?.01:e))/t,eR=(e,o)=>{let{debug:t}=window.__pubx__.logger;return e.includes("_dr_")?-1*parseFloat(e.split("_dr_")[1].split("_")[0]):null!==o.decayRate?-1*o.decayRate:(t("No decay rate in floor model version or config",e),null)},eE=(e,o,t)=>(e=0===e?.01:e)*Math.exp(o*t),eU=(e,o)=>{let{debug:t}=window.__pubx__.logger,r=ef(e);r.decayRate=o,t("Assigning decay rate",e,r.decayRate)},eF=e=>{let{debug:o}=window.__pubx__.logger,t=ef(e),{history:r}=t,[i,a,n]=[r[0].cpm,r[r.length-1].cpm,r.length-1];t.decayRate=em(i,a,n),o("Updating decay rate",e,t.decayRate)},eC=(e,o)=>{let t=eb(e);if(0===t.length)return!1;if(o||1===t.length)return!0;let r=t.slice(0,-1).map(e=>e.cpm).reduce((e,o)=>Math.min(e,o)),i=t[t.length-1].cpm;return i<r},ey=(e,o,t)=>{let{remoteAucError:r}=t,{__pmacCpmHistory__:i}=window,a=Object.keys(i);if("PB_GAM_CUSTOM_AY"===window.__pubx__.variant)a.forEach(r=>{eC(r,o)&&ex(r,void 0,eI(r,e,o),t)});else{let i=B(a,r);i.forEach(({adUnitCode:r,slot:i})=>{eC(r,o)&&ex(r,i,eI(r,e,o),t)})}},ew=e=>"|banner"+(e.fields.includes("size")?"|*":""),eA=(e,o,t)=>{let r=Object.keys(o),i=ew(t),a=r.find(o=>[e.getAdUnitPath()+i,e.getSlotElementId()+i].includes(o));return a},ev=(e,o,t)=>{let r=Object.keys(o),i=r.find(o=>o.split(ew(t))[0]===eQ(e));return i},eT=(e,o)=>{if(o){let t=eA(e,o.floors.data.values,o.floors.data.schema);if(t)return o.floors.data.values[t]}},ex=(e,o,t,r)=>{let i;let{remoteAucError:a}=r,{__nextfloorsConfig__:n}=window;if(void 0===n)throw Error("__nextfloorsConfig__ undefined. Skip updating adUnit floors config");let{floors:{data:{values:d,schema:_}}}=n;if(void 0===(i="PB_GAM_CUSTOM_AY"===window.__pubx__.variant?ev(e,d,_):eA(o,d,_))){a({code:l.MISSING_ADUNIT_FLOOR_RESPONSE,adUnitCode:e});return}d[i]=t},eD=e=>eb(e).length<=1,eI=(e,o,t)=>{let{decayRate:r,history:i}=ef(e),[a,n,d]=[i[0].cpm,i.length,i[i.length-1]],l=()=>{let e=eE(a,r,n),t=e*o;return t<.01?.01:parseFloat(t.toFixed(u.DEC_LIMIT))};return t?l():eD(e)||d.adUnitStatus===u.AdUnitStatus.NOBIDS?.01:l()},eS=(e,o)=>Q(void 0,void 0,void 0,function*(){let{debug:o}=window.__pubx__.logger;try{let t=yield fetch(e.floorFetchUrl),r=yield t.json();o("PMAC Received floor rules",r),eg(r,e)}catch(r){let t=(0,u.getDefaultFloorRulesData)(e);o("PMAC Default floor rules",t),eg(t,e)}}),eL=(e,o)=>Q(void 0,void 0,void 0,function*(){let{debug:o}=window.__pubx__.logger,t=e.pbNamespace.getConfig("floors");window.__nextfloorsConfig__={floors:t},o("Reading floors from config",t)}),eh=()=>Q(void 0,void 0,void 0,function*(){let e=()=>{let{debug:e}=window.__pubx__.logger,o=er(window.__pubxFloorsConfig__);if(!o)throw Error("__pubxFloorsConfig__ not defined. Skip pmac");window.__nextfloorsConfig__=o,e("Reading floors from rtd module",er(o))};e(),window.addEventListener(u.FLOORS_EVENT_HANDLE,o=>{o.detail.status===d.SUCCESS&&e()})}),eP=(e=null,(o,t,r,i,a,n,d,_)=>Q(void 0,void 0,void 0,function*(){let{remoteAucError:s}=_,{variant:c,isRtd:p}=window.__pubx__;null===e&&(e=p?eh():"PB_GAM_CUSTOM_AZ"===c?eL(a,_):eS(a,_)),yield e,eN(o,t,r,i);let O=null!==d;O?eU(t,d):eD(t)||eF(t);let{__nextfloorsConfig__:g}=window;if(void 0===g)throw s({code:l.PMAC_FLOOR_RESPONSE_NOT_AVAILABLE,adUnitCode:t}),Error("__nextfloorsConfig__ undefined. Skip updating floors config");"PB_GAM_CUSTOM_AY"===c?(ey(n,O,_),(0,u.setFloorsConfig)(a,e=>g)):googletag.cmd.push(()=>{Z({remoteError:s,code:l.UNCAUGHT_GAM_ERROR,location:"updateSetFloor"},()=>{ey(n,O,_),(0,u.setFloorsConfig)(a,e=>g)})})})),eM=()=>({debug:(e,...o)=>{},error:(...e)=>{},makeRemoteAucError:e=>e=>{},remotePageError:e=>{},makeRemoteAucEvent:e=>e=>{}}),eV=(e,o)=>{window.__pubxFloors__={},!1!==window.__loadedBeforePb__&&(window.__loadedBeforePb__=void 0===e.pbNamespace.version),window.__pmacCpmHistory__={},eO(),window.__pubx__={variant:o,version:"1717046727653",isRtd:!1},window.__pubx__.logger||(window.__pubx__.logger=eM()),e.pbNamespace.que.push(function(){window.__pubx__.logger=ec(e),ep(e.pbNamespace)}),window.__pubxGamQue__=[]},eG=e=>eV(e,"PB_GAM_CUSTOM_AZ"),eB=e=>e.bids.some(({floorData:e})=>e&&e.floorProvider===u.FLOOR_PROVIDER&&e.skipped),ej=e=>{let{floorData:o}=e;if(o&&o.floorProvider===u.FLOOR_PROVIDER&&o.modelVersion)return o.modelVersion},eK=e=>e.bids.some(ej),ek=(e,o,t,r)=>{var i,a,n;let d=null!==(n=null===(a=null===(i=t.pbNamespace.getConfig("floors"))||void 0===i?void 0:i.data)||void 0===a?void 0:a.dbm_hrs)&&void 0!==n?n:null;if(null===d)return r;let l=d[e.code]||d[e.adUnitPath]||null;return null===l&&void 0!==o&&(l=d[o.getAdUnitPath()]||d[o.getSlotElementId()]||null),null===l||(r[t.pubxOptimizedKey]&&r[t.pubxOptimizedKey]!==t.pubxOptimizedOnValue?r[t.pubxHeuristicKey+"-"+t.pubxOptimizedOffValue]=l:r[t.pubxHeuristicKey]=l),r},eH=(e,o,t,r)=>{let i={},a=q(e,t,r);i[t.pubxFloorKey]=a;let n=(0,u.getMvmVersion)(o);if(n){i[t.pubxMvKey]=n;let e=eW(a,n);i[t.pubxFloorMvKey]=e}return i},eW=(e,o)=>e+"-"+o,ez=(e,o)=>{let t=eB(e);return t?o.pubxOptimizedOffValue:o.pubxOptimizedOnValue},eq=(e,o)=>{let t=eK(e);return t?o.pubxSplitOnValue:o.pubxSplitOffValue},eX=(e,o)=>{let t={},r=eq(e,o);if(t[o.pubxSplitKey]=r,r===o.pubxSplitOnValue){let r=ez(e,o);t[o.pubxOptimizedKey]=r}return t},eQ=e=>e.split("__ayManagerEnv__")[0];(0,u.getPbConfigObject)().pbNsKeys.split(",").map(e=>G(e)).forEach(e=>{(0,s.initPubxGlobalsCustomAzerion)(e),W(e,H),X(e)})})();